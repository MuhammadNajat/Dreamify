{"version":3,"file":"graphiql.js","sourceRoot":"","sources":["../../../../../src/cli/services/dev/processes/graphiql.ts"],"names":[],"mappings":"AACA,OAAO,EAAC,aAAa,EAAC,MAAM,uBAAuB,CAAA;AACnD,OAAO,EAAC,mBAAmB,EAAC,MAAM,uBAAuB,CAAA;AAkBzD,MAAM,CAAC,KAAK,UAAU,0BAA0B,CAC9C,OAAmD;IAEnD,OAAO;QACL,IAAI,EAAE,UAAU;QAChB,MAAM,EAAE,UAAU;QAClB,SAAS,EAAE,IAAI,aAAa,CAAC,QAAQ,WAAW;QAChD,OAAO,EAAE,EAAC,GAAG,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,EAAC;QAC/B,QAAQ,EAAE,oBAAoB;KAC/B,CAAA;AACH,CAAC;AAED,MAAM,CAAC,MAAM,oBAAoB,GAAqD,KAAK,EACzF,EAAC,MAAM,EAAE,WAAW,EAAC,EACrB,OAAqC,EACrC,EAAE;IACF,MAAM,UAAU,GAAG,mBAAmB,CAAC,EAAC,GAAG,OAAO,EAAE,MAAM,EAAC,CAAC,CAAA;IAC5D,WAAW,CAAC,gBAAgB,CAAC,OAAO,EAAE,KAAK,IAAI,EAAE;QAC/C,UAAU,CAAC,KAAK,EAAE,CAAA;IACpB,CAAC,CAAC,CAAA;AACJ,CAAC,CAAA","sourcesContent":["import {BaseProcess, DevProcessFunction} from './types.js'\nimport {urlNamespaces} from '../../../constants.js'\nimport {setupGraphiQLServer} from '../graphiql/server.js'\n\ninterface GraphiQLServerProcessOptions {\n  appName: string\n  appUrl: string\n  apiKey: string\n  apiSecret: string\n  storeFqdn: string\n  randomKey: string\n  url: string\n  port: number\n}\n\nexport interface GraphiQLServerProcess extends BaseProcess<GraphiQLServerProcessOptions> {\n  type: 'graphiql'\n  urlPrefix: string\n}\n\nexport async function setupGraphiQLServerProcess(\n  options: Omit<GraphiQLServerProcessOptions, 'port'>,\n): Promise<GraphiQLServerProcess> {\n  return {\n    type: 'graphiql',\n    prefix: `graphiql`,\n    urlPrefix: `/${urlNamespaces.devTools}/graphiql`,\n    options: {...options, port: -1},\n    function: launchGraphiQLServer,\n  }\n}\n\nexport const launchGraphiQLServer: DevProcessFunction<GraphiQLServerProcessOptions> = async (\n  {stdout, abortSignal},\n  options: GraphiQLServerProcessOptions,\n) => {\n  const httpServer = setupGraphiQLServer({...options, stdout})\n  abortSignal.addEventListener('abort', async () => {\n    httpServer.close()\n  })\n}\n"]}