{"version":3,"file":"version-name.js","sourceRoot":"","sources":["../../../src/cli/validations/version-name.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,UAAU,EAAC,MAAM,6BAA6B,CAAA;AAEtD,MAAM,UAAU,eAAe,CAAC,OAA2B;IACzD,IAAI,OAAO,OAAO,KAAK,WAAW;QAAE,OAAM;IAE1C,MAAM,YAAY,GAAG,CAAC,uBAAuB,EAAE,EAAC,SAAS,EAAE,OAAO,EAAC,CAAC,CAAA;IAEpE,MAAM,gBAAgB,GAAG,GAAG,CAAA;IAC5B,IAAI,OAAO,CAAC,MAAM,GAAG,gBAAgB,EAAE;QACrC,MAAM,IAAI,UAAU,CAAC,YAAY,EAAE,wBAAwB,gBAAgB,sBAAsB,CAAC,CAAA;KACnG;IAED,MAAM,oBAAoB,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAA;IACxC,IAAI,oBAAoB,CAAC,IAAI,CAAC,CAAC,mBAAmB,EAAE,EAAE,CAAC,OAAO,KAAK,mBAAmB,CAAC,EAAE;QACvF,MAAM,IAAI,UAAU,CAClB,YAAY,EACZ,mCAAmC,oBAAoB,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CACjG,CAAA;KACF;IAED,MAAM,UAAU,GAAG,oBAAoB,CAAA;IACvC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE;QAC9B,MAAM,IAAI,UAAU,CAAC,YAAY,EAAE;YACjC,0FAA0F;SAC3F,CAAC,CAAA;KACH;AACH,CAAC","sourcesContent":["import {AbortError} from '@shopify/cli-kit/node/error'\n\nexport function validateVersion(version: string | undefined) {\n  if (typeof version === 'undefined') return\n\n  const errorMessage = ['Invalid version name:', {userInput: version}]\n\n  const versionMaxLength = 100\n  if (version.length > versionMaxLength) {\n    throw new AbortError(errorMessage, `Version name must be ${versionMaxLength} characters or less.`)\n  }\n\n  const invalidCompleteWords = ['.', '..']\n  if (invalidCompleteWords.find((invalidCompleteWord) => version === invalidCompleteWord)) {\n    throw new AbortError(\n      errorMessage,\n      `Version name may not be any of: ${invalidCompleteWords.map((word) => `'${word}'`).join(' , ')}`,\n    )\n  }\n\n  const validChars = /^[a-zA-Z0-9.\\-_]+$/\n  if (!version.match(validChars)) {\n    throw new AbortError(errorMessage, [\n      'Version name can only contain alphanumeric characters, periods, hyphens, and underscores',\n    ])\n  }\n}\n"]}