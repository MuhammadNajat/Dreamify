{"version":3,"file":"app.test-data.js","sourceRoot":"","sources":["../../../../src/cli/models/app/app.test-data.ts"],"names":[],"mappings":"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","sourcesContent":["import {App, AppConfiguration, AppInterface, WebType, WebhookConfig} from './app.js'\nimport {ExtensionTemplate} from './template.js'\nimport {RemoteSpecification} from '../../api/graphql/extension_specifications.js'\nimport themeExtension from '../templates/theme-specifications/theme.js'\nimport {ExtensionInstance} from '../extensions/extension-instance.js'\nimport {loadFSExtensionsSpecifications} from '../extensions/load-specifications.js'\nimport {FunctionConfigType} from '../extensions/specifications/function.js'\nimport {OrganizationApp} from '../organization.js'\nimport productSubscriptionUIExtension from '../templates/ui-specifications/product_subscription.js'\nimport webPixelUIExtension from '../templates/ui-specifications/web_pixel_extension.js'\nimport {BaseConfigType} from '../extensions/schemas.js'\nimport {PartnersSession} from '../../services/context/partner-account-info.js'\n\nexport const DEFAULT_CONFIG = {\n  path: '/tmp/project/shopify.app.toml',\n  application_url: 'https://myapp.com',\n  client_id: '12345',\n  name: 'my app',\n  webhooks: {\n    api_version: '2023-04',\n  },\n  embedded: true,\n  access_scopes: {\n    scopes: 'read_products',\n  },\n}\n\nexport function testApp(app: Partial<AppInterface> = {}, schemaType: 'current' | 'legacy' = 'legacy'): AppInterface {\n  const getConfig = () => {\n    if (schemaType === 'legacy') {\n      return {scopes: '', extension_directories: [], path: ''}\n    } else {\n      return DEFAULT_CONFIG\n    }\n  }\n\n  const newApp = new App(\n    app.name ?? 'App',\n    app.idEnvironmentVariableName ?? 'SHOPIFY_API_KEY',\n    app.directory ?? '/tmp/project',\n    app.packageManager ?? 'yarn',\n    app.configuration ?? getConfig(),\n    app.nodeDependencies ?? {},\n    app.webs ?? [\n      {\n        directory: '',\n        configuration: {\n          roles: [WebType.Backend],\n          commands: {dev: ''},\n        },\n      },\n    ],\n    app.allExtensions ?? [],\n    app.usesWorkspaces ?? false,\n    app.dotenv,\n    app.errors,\n  )\n  if (app.updateDependencies) {\n    Object.getPrototypeOf(newApp).updateDependencies = app.updateDependencies\n  }\n  if (app.extensionsForType) {\n    Object.getPrototypeOf(newApp).extensionsForType = app.extensionsForType\n  }\n  return newApp\n}\n\ninterface TestAppWithConfigOptions {\n  app?: Partial<AppInterface>\n  config: object\n}\n\nexport function testAppWithLegacyConfig({app = {}, config = {}}: TestAppWithConfigOptions): AppInterface {\n  const configuration: AppConfiguration = {\n    path: '',\n    scopes: '',\n    name: 'name',\n    extension_directories: [],\n    ...config,\n  }\n  return testApp({...app, configuration})\n}\n\nexport function testAppWithConfig(options?: TestAppWithConfigOptions): AppInterface {\n  const app = testApp(options?.app, 'current')\n  app.configuration = {\n    ...DEFAULT_CONFIG,\n    ...options?.config,\n  }\n\n  return app\n}\n\nexport function getWebhookConfig(webhookConfigOverrides?: WebhookConfig) {\n  return {\n    ...DEFAULT_CONFIG,\n    webhooks: {\n      ...DEFAULT_CONFIG.webhooks,\n      ...webhookConfigOverrides,\n    },\n  }\n}\n\nexport function testOrganizationApp(app: Partial<OrganizationApp> = {}): OrganizationApp {\n  const defaultApp = {\n    id: '1',\n    title: 'app1',\n    apiKey: 'api-key',\n    apiSecretKeys: [{secret: 'api-secret'}],\n    organizationId: '1',\n    grantedScopes: [],\n    applicationUrl: 'https://example.com',\n    redirectUrlWhitelist: ['https://example.com/callback1'],\n  }\n  return {...defaultApp, ...app}\n}\n\nexport async function testUIExtension(\n  uiExtension: Omit<Partial<ExtensionInstance>, 'configuration'> & {\n    configuration?: Partial<BaseConfigType> & {path?: string}\n  } = {},\n): Promise<ExtensionInstance> {\n  const directory = uiExtension?.directory ?? '/tmp/project/extensions/test-ui-extension'\n\n  const configuration = uiExtension?.configuration ?? {\n    name: uiExtension?.configuration?.name ?? 'test-ui-extension',\n    type: uiExtension?.configuration?.type ?? uiExtension?.type ?? 'product_subscription',\n    metafields: [],\n    capabilities: {\n      block_progress: false,\n      network_access: false,\n      api_access: false,\n      collect_buyer_consent: {\n        sms_marketing: false,\n      },\n    },\n  }\n  const configurationPath = uiExtension?.configuration?.path ?? `${directory}/shopify.ui.extension.toml`\n  const entryPath = uiExtension?.entrySourceFilePath ?? `${directory}/src/index.js`\n\n  const allSpecs = await loadFSExtensionsSpecifications()\n  const specification = allSpecs.find((spec) => spec.identifier === configuration.type)!\n\n  const extension = new ExtensionInstance({\n    configuration: configuration as BaseConfigType,\n    configurationPath,\n    entryPath,\n    directory,\n    specification,\n  })\n\n  extension.devUUID = uiExtension?.devUUID ?? 'test-ui-extension-uuid'\n\n  return extension\n}\n\nexport async function testThemeExtensions(directory = './my-extension'): Promise<ExtensionInstance> {\n  const configuration = {\n    name: 'theme extension name',\n    type: 'theme' as const,\n    metafields: [],\n  }\n\n  const allSpecs = await loadFSExtensionsSpecifications()\n  const specification = allSpecs.find((spec) => spec.identifier === 'theme')!\n\n  const extension = new ExtensionInstance({\n    configuration,\n    configurationPath: '',\n    directory,\n    specification,\n  })\n\n  return extension\n}\n\nexport async function testWebPixelExtension(directory = './my-extension'): Promise<ExtensionInstance> {\n  const configuration = {\n    name: 'web pixel name',\n    type: 'web_pixel' as const,\n    metafields: [],\n    runtime_context: 'strict',\n    settings: [],\n  }\n\n  const allSpecs = await loadFSExtensionsSpecifications()\n  const specification = allSpecs.find((spec) => spec.identifier === 'web_pixel_extension')!\n  const parsed = specification.schema.parse(configuration)\n  const extension = new ExtensionInstance({\n    configuration: parsed,\n    configurationPath: '',\n    directory,\n    specification,\n  })\n\n  return extension\n}\n\nexport async function testTaxCalculationExtension(directory = './my-extension'): Promise<ExtensionInstance> {\n  const configuration = {\n    name: 'tax',\n    type: 'tax_calculation' as const,\n    metafields: [],\n    runtime_context: 'strict',\n  }\n\n  const allSpecs = await loadFSExtensionsSpecifications()\n  const specification = allSpecs.find((spec) => spec.identifier === 'tax_calculation')!\n\n  const extension = new ExtensionInstance({\n    configuration,\n    configurationPath: '',\n    directory,\n    specification,\n  })\n\n  return extension\n}\n\nfunction defaultFunctionConfiguration(): FunctionConfigType {\n  return {\n    name: 'test function extension',\n    description: 'description',\n    type: 'product_discounts',\n    build: {\n      command: 'echo \"hello world\"',\n    },\n    api_version: '2022-07',\n    configuration_ui: true,\n    metafields: [],\n  }\n}\n\ninterface TestFunctionExtensionOptions {\n  dir?: string\n  config?: FunctionConfigType\n  entryPath?: string\n}\n\nexport async function testFunctionExtension(\n  opts: TestFunctionExtensionOptions = {},\n): Promise<ExtensionInstance<FunctionConfigType>> {\n  const directory = opts.dir ?? '/tmp/project/extensions/my-function'\n  const configuration = opts.config ?? defaultFunctionConfiguration()\n\n  const allSpecs = await loadFSExtensionsSpecifications()\n  const specification = allSpecs.find((spec) => spec.identifier === 'function')!\n\n  const extension = new ExtensionInstance({\n    configuration,\n    configurationPath: '',\n    entryPath: opts.entryPath,\n    directory,\n    specification,\n  })\n  return extension\n}\n\nexport const testRemoteSpecifications: RemoteSpecification[] = [\n  {\n    name: 'Checkout Post Purchase',\n    externalName: 'Post-purchase UI',\n    identifier: 'checkout_post_purchase',\n    externalIdentifier: 'checkout_post_purchase_external',\n    gated: false,\n    options: {\n      managementExperience: 'cli',\n      registrationLimit: 1,\n    },\n    features: {\n      argo: {\n        surface: 'checkout',\n      },\n    },\n  },\n  {\n    name: 'Online Store - App Theme Extension',\n    externalName: 'Theme App Extension',\n    identifier: 'theme',\n    externalIdentifier: 'theme_external',\n    gated: false,\n    options: {\n      managementExperience: 'cli',\n      registrationLimit: 1,\n    },\n  },\n  {\n    name: 'Product Subscription',\n    externalName: 'Subscription UI',\n    identifier: 'product_subscription',\n    externalIdentifier: 'product_subscription_external',\n    gated: false,\n    options: {\n      managementExperience: 'cli',\n      registrationLimit: 1,\n    },\n    features: {\n      argo: {\n        surface: 'admin',\n      },\n    },\n  },\n  {\n    name: 'UI Extension',\n    externalName: 'UI Extension',\n    identifier: 'ui_extension',\n    externalIdentifier: 'ui_extension_external',\n    gated: false,\n    options: {\n      managementExperience: 'cli',\n      registrationLimit: 50,\n    },\n    features: {\n      argo: {\n        surface: 'all',\n      },\n    },\n  },\n  {\n    name: 'Customer Accounts',\n    externalName: 'Customer Accounts',\n    identifier: 'customer_accounts_ui_extension',\n    externalIdentifier: 'customer_accounts_ui_extension_external',\n    gated: false,\n    options: {\n      managementExperience: 'cli',\n      registrationLimit: 10,\n    },\n    features: {\n      argo: {\n        surface: 'customer_accounts',\n      },\n    },\n  },\n  {\n    name: 'Checkout Extension',\n    externalName: 'Checkout UI',\n    identifier: 'checkout_ui_extension',\n    externalIdentifier: 'checkout_ui_extension_external',\n    gated: false,\n    options: {\n      managementExperience: 'cli',\n      registrationLimit: 5,\n    },\n    features: {\n      argo: {\n        surface: 'checkout',\n      },\n    },\n  },\n  {\n    name: 'Product Subscription',\n    externalName: 'Subscription UI',\n    // we are going to replace this to 'product_subscription' because we\n    // started using it before relying on the extension specification identifier\n    identifier: 'subscription_management',\n    externalIdentifier: 'product_subscription_external',\n    gated: false,\n    options: {\n      managementExperience: 'cli',\n      registrationLimit: 1,\n    },\n    features: {\n      argo: {\n        surface: 'admin',\n      },\n    },\n  },\n  {\n    name: 'Marketing Activity',\n    externalName: 'Marketing Activity',\n    identifier: 'marketing_activity_extension',\n    externalIdentifier: 'marketing_activity_extension_external',\n    gated: false,\n    options: {\n      managementExperience: 'dashboard',\n      registrationLimit: 100,\n    },\n  },\n  {\n    name: 'function',\n    externalName: 'function',\n    identifier: 'function',\n    externalIdentifier: 'function',\n    gated: false,\n    options: {\n      managementExperience: 'cli',\n      registrationLimit: 1,\n    },\n    features: {\n      argo: {\n        surface: 'checkout',\n      },\n    },\n  },\n]\n\nexport const testRemoteExtensionTemplates: ExtensionTemplate[] = [\n  {\n    identifier: 'cart_checkout_validation',\n    name: 'Function - Cart and Checkout Validation',\n    defaultName: 'cart-checkout-validation',\n    group: 'Discounts and checkout',\n    supportLinks: ['https://shopify.dev/docs/api/functions/reference/cart-checkout-validation'],\n    types: [\n      {\n        type: 'function',\n        url: 'https://github.com/Shopify/function-examples',\n        extensionPoints: [],\n        supportedFlavors: [\n          {\n            name: 'Rust',\n            value: 'rust',\n            path: 'checkout/rust/cart-checkout-validation/default',\n          },\n        ],\n      },\n    ],\n  },\n  {\n    identifier: 'cart_transform',\n    name: 'Function - Cart transformer',\n    defaultName: 'cart-transformer',\n    group: 'Discounts and checkout',\n    supportLinks: [],\n    types: [\n      {\n        type: 'function',\n        url: 'https://github.com/Shopify/function-examples',\n        extensionPoints: [],\n        supportedFlavors: [\n          {\n            name: 'Wasm',\n            value: 'wasm',\n            path: 'checkout/wasm/cart-transform/default',\n          },\n          {\n            name: 'Rust',\n            value: 'rust',\n            path: 'checkout/rust/cart-transform/default',\n          },\n        ],\n      },\n    ],\n  },\n  {\n    identifier: 'product_discounts',\n    name: 'Function - Product discounts',\n    defaultName: 'product-discounts',\n    group: 'Discounts and checkout',\n    supportLinks: ['https://shopify.dev/docs/apps/discounts'],\n    types: [\n      {\n        type: 'function',\n        url: 'https://github.com/Shopify/function-examples',\n        extensionPoints: [],\n        supportedFlavors: [\n          {\n            name: 'Wasm',\n            value: 'wasm',\n            path: 'discounts/wasm/product-discounts/default',\n          },\n          {\n            name: 'Rust',\n            value: 'rust',\n            path: 'discounts/rust/product-discounts/default',\n          },\n        ],\n      },\n    ],\n  },\n  {\n    identifier: 'order_discounts',\n    name: 'Function - Order discounts',\n    defaultName: 'order-discounts',\n    group: 'Discounts and checkout',\n    supportLinks: [],\n    types: [\n      {\n        type: 'function',\n        url: 'https://github.com/Shopify/function-examples',\n        extensionPoints: [],\n        supportedFlavors: [\n          {\n            name: 'Wasm',\n            value: 'wasm',\n            path: 'discounts/wasm/order-discounts/default',\n          },\n          {\n            name: 'Rust',\n            value: 'rust',\n            path: 'discounts/rust/order-discounts/default',\n          },\n          {\n            name: 'JavaScript',\n            value: 'vanilla-js',\n            path: 'discounts/javascript/order-discounts/default',\n          },\n        ],\n      },\n    ],\n  },\n]\n\nexport const testLocalExtensionTemplates: ExtensionTemplate[] = [\n  themeExtension,\n  productSubscriptionUIExtension,\n  webPixelUIExtension,\n]\n\nexport const testPartnersUserSession: PartnersSession = {\n  token: 'token',\n  accountInfo: {\n    type: 'UserAccount',\n    email: 'partner@shopify.com',\n  },\n}\n\nexport const testPartnersServiceSession: PartnersSession = {\n  token: 'partnersToken',\n  accountInfo: {\n    type: 'ServiceAccount',\n    orgName: 'organization',\n  },\n}\n"]}